## 특정 구간 전체에 업데이트 해줘야 하는 경우

예를 들어 이런 문제가 있다.

> 40 45 700 쿼리가 입력되었을 때, 배열의 40~45번 인덱스에 각각 700을 더해줘야하는 문제

쿼리에 따라 대응해줘야 하는 문제의 경우, 보통 특정 구간을 조회하는 형태의 쿼리가 들어오는 편이다.
그리고 이런 문제의 경우 업데이트는 어느 한 항목에 대해서만 처리하라고 시키는 편이다. (내가 비교적 무난한 문제만 풀어봐서 그럴 수도 있다)

그렇다면, 위에서 제시된 문제처럼 특정 구간에 다 업데이트 해줘야 하는 경우는 어떻게 처리해야 하는가?

내가 알아본 바로는 세가지 방법이 있다고 한다.

* 델타 인코딩

배열이 다 비어있는 상태에서 업데이트 하는 특수한 경우일 때 사용 가능할듯.
-> 배열이 비어있지 않다면, 원본 배열이랑 델타용 배열을 나누어서 생각하면 될 것 같음

지인에게 조금 마이너한 방법이라고 설명을 들었다. 주변 사람들이 델타 인코딩이라고 부르고 있어서 그렇게 부르신다고 했는데, 일본에서는 이걸 imos法이라고 하더라.

예를 들어 `{0, 0, 0, 0, 0, 0, 0, 0, ...}` 에다가 쿼리를 받아서 업데이트 한다고 치자.

`2 5 100` 쿼리가 들어온다면 쿼리의 첫 번째 인덱스인 2번 인덱스에 100을 더해주고, 마지막 인덱스 기준으로 다음 인덱스인 6번 인덱스에 -100을 더해준다.

이런 식으로 O(2 * N)에 전처리를 해놓으면 배열에 들어있는 값은 `{0, 0, 100, 0, 0, 0, -100}` 이 된다.

누적합을 구해준다면? `{0, 0, 100, 100, 100, 100, 0}`

해당 솔루션에 대해서 [설명](http://www.geeksforgeeks.org/binary-indexed-tree-range-updates-point-queries/)을 확인해볼 수 있다. (Method 2 참고)

imos法에 대해서는 [링크](https://imoz.jp/algorithms/imos_method.html) 참고.

* Petr의 Fenwick Tree 구간 업데이트

http://petr-mitrichev.blogspot.com/2013/05/fenwick-tree-range-updates.html

좀 복잡하다. Range Update & Range Query 혹은 Range Update & Point Query 상황에서 모두 사용 가능한듯.

제대로 사용하려면 이 페이지랑 geeksforgeeks에서 추가적으로 공부해보고 코딩해봐야 할 것 같다.

* Lazy Propagation

https://www.acmicpc.net/blog/view/26

세그 트리에서 사용하는 기법인데, 해당 노드까지 방문해서 업데이트를 하는게 아니라 별도로 lazy 배열에 업데이트할 값을 저장해놓고 나중에 실제 방문이 필요할 때 업데이트 해주는 식.

## 결론
내가 이해한게 맞다면.. 문제에서 제시하는 상황마다 사용 가능한 방법이 다르다.

업데이트 쿼리 여러번에 특정 인덱스 값 구하는 쿼리가 한번일 때랑, 업데이트 쿼리 여러번에 특정 인덱스 값 구하는 쿼리가 여러번일 때 등등..

fenwick tree를 공부해서 적절하게 사용할 수 있도록 노력해야겠다!

더 깨달음이 왔을 때 이 문서도 업데이트 할 예정.